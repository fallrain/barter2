(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/haierHouse/HaierHouseApply"],{"0f78":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},2345:function(t,e,n){"use strict";n.r(e);var i=n("0f78"),r=n("ce43");for(var s in r)"default"!==s&&function(t){n.d(e,t,function(){return r[t]})}(s);n("4168");var a=n("2877"),o=Object(a["a"])(r["default"],i["a"],i["b"],!1,null,"2a2721f0",null);e["default"]=o.exports},4168:function(t,e,n){"use strict";var i=n("5fce"),r=n.n(i);r.a},"5fce":function(t,e,n){},c779:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){return n.e("components/ss-upload-image/ss-upload-image").then(n.bind(null,"7571"))},o=function(){return n.e("components/uni-icon/uni-icon").then(n.bind(null,"bea1"))},u=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-calendar/uni-calendar")]).then(n.bind(null,"b990"))},c=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"b055"))},d=function(){return Promise.all([n.e("common/vendor"),n.e("components/w-picker/w-picker")]).then(n.bind(null,"93cd"))},l=function(){return n.e("components/common/BMultrowCheckbox").then(n.bind(null,"bcf8"))},h=function(){return n.e("components/common/BMultrowRadio").then(n.bind(null,"b76a"))},f=function(){return n.e("components/common/BItem").then(n.bind(null,"dd3c"))},m={name:"HaierHouseApply",components:{BItem:f,BMultrowCheckbox:l,BMultrowRadio:h,ssUploadImage:a,UniIcon:o,calendar:u,uniPopup:c,wPicker:d},data:function(){return{imgName:"file",url:this.envConfig.domain+"barter-builthouse/buildHouse/uploadImage",fileList:[],current:1,name:"",tel:"",roomArea:"",rent:"",address:"",middle:!0,alert:!1,pickerStartShow:!1,pickerEndShow:!1,dateS:"",dateE:"",startDateS:"",startDateE:"",endDateS:"",endDateE:"",startTime:"",endTime:"",alertMsg:"",industryIds:[],industryList:[],dataItem:[],sampleRoomTypeList:[{id:"USA",name:"毛坯房"},{id:"CHN",name:"精装房"},{id:"BRA",name:"品牌联盟"},{id:"JPN",name:"底商门脸房"}],sampleRoomIds:"",fileMap:{},resID:"",items3:[]}},onLoad:function(){var t=this;if(this.industryIds.length>0){var e={id:"0",name:"样板间",imgs:[]};this.industryList.push(e)}for(var n=0;n<this.industryIds.length;n++)this.items3.forEach(function(e){t.industryIds[n]==e.id&&t.industryList.push(e)});this.getIndustryList()},computed:r({},(0,i.mapState)("haierHouse",["choosedLeader"]),{checkedIndustry:function(){var t=this,e=this.industryIds.map(function(e){var n=t.items3.find(function(t){return t.id===e});return{id:e,name:n?n.name:""}});return e.length&&e.unshift({id:"ybj",name:"样板间"}),e}}),methods:{chooseLeader:function(){t.navigateTo({url:"/pages/haierHouse/ChooseLeader"})},genFileMap:function(){var t=this,e=[],n=[{id:"ybj",name:"样板间",imgs:[]}];e=n.concat(this.items3),setTimeout(function(){e.forEach(function(e){t.$set(t.fileMap,e.id,[])})})},getIndustryList:function(){var t=this;this.hGet("barter-builthouse/buildHouse/proGrpList",{}).then(function(e){e&&e.forEach(function(e){var n={id:e.productCode,name:e.productName,imgs:[]};t.items3.push(n)}),t.genFileMap()})},radioChange:function(t){},array_contain:function(t,e){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},removeByValue:function(t,e){for(var n=0;n<t.length;n++)if(t[n]==e){t.splice(n,1);break}},checkboxChange:function(t){var e=this;if(1==t.value.length&&0==this.industryList.length){var n={id:"ybj",name:"样板间",imgs:[]};this.industryList.push(n)}this.dataItem=this.industryList,this.industryList=[];for(var i=[],r=0;r<t.value.length;r++)this.items3.forEach(function(n){t.value[r]==n.id&&i.push(n),e.array_contain(e.dataItem,n)||e.dataItem.push(n)});if(0!=i.length){1===t.value.length&&this.industryList.push(this.dataItem[0]);for(r=0;r<i.length;r++)this.dataItem.forEach(function(t){i[r].id==t.id&&e.industryList.push(t)})}},onSuccess:function(t){var e=t.data,n=t.fileList;console.log(e),n.push(e.data.imageUrl)},onError:function(){},onRemove:function(t){var e=t.index,n=t.fileList;n.splice(e,1)},telEnd:function(){""===this.tel&&(this.alert=!0,this.alertMsg="请输入手机号"),/^1[34578]\d{9}$/.test(this.tel)||(this.alert=!0,this.alertMsg="请输入正确的手机号")},nameEnd:function(){""===this.name&&(this.alert=!0,this.alertMsg="请输入筑家负责人")},areaEnd:function(){""===this.area&&(this.alert=!0,this.alertMsg="请输入面积")},addressEnd:function(){""===this.address&&(this.alert=!0,this.alertMsg="请输入地址")},rentEnd:function(){""===this.rent&&(this.alert=!0,this.alertMsg="请输入租金")},startTimeSelect:function(){this.pickerStartShow=!0},endTimeSelect:function(){},bindDateChangeS:function(t){this.startTime=t.target.value},bindDateChangeE:function(e){this.endTime=e.target.value,this.CompareDate(this.startTime,this.endTime)&&(t.showModal({title:"提示",content:"开始时间不能小于开始时间",success:function(t){t.confirm||t.cancel}}),this.endTime="")},CompareDate:function(t,e){return new Date(t.replace(/-/g,"/"))>=new Date(e.replace(/-/g,"/"))},hidePopup:function(){this.middle=!1},hidePopupAlert:function(){this.alert=!1},nextPage:function(){if(""===this.name)return this.alertMsg="请输入筑家负责人",void(this.alert=!0);if(""===this.tel)return this.alertMsg="请输入手机号",void(this.alert=!0);if(""===this.roomArea)return this.alertMsg="请输入房间面积",void(this.alert=!0);if(""===this.address)return this.alertMsg="请输入详细地址",void(this.alert=!0);if(""===this.rent)return this.alertMsg="请输入租金",void(this.alert=!0);if(""===this.startTime)return this.alertMsg="请输入开始时间",void(this.alert=!0);if(""===this.endTime)return this.alertMsg="请输入结束时间",void(this.alert=!0);var e=[];if(this.fileMap!=={})for(var n=0;n<this.checkedIndustry.length;n++)for(var i in this.fileMap)if(this.checkedIndustry[n].id==i){var r={id:i,name:this.checkedIndustry[n].name,imgs:this.fileMap[i]};e.push(r)}this.hPost("barter-builthouse/buildHouse/saveShopInfo",{createBy:"Z0000001",constructionDirector:this.name,phoneNumber:this.tel,templateType:this.sampleRoomIds,area:this.roomArea,address:this.address,rent:this.rent,leaseBegin:this.startTime,leaseEnd:this.endTime,inIndustryPic:JSON.stringify(e)}).then(function(e){e&&(console.log(e),t.navigateTo({url:"/pages/haierHouse/HaierHouseApplySecondPage?id="+e}))})}}};e.default=m}).call(this,n("543d")["default"])},ce43:function(t,e,n){"use strict";n.r(e);var i=n("c779"),r=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=r.a}},[["e086","common/runtime","common/vendor"]]]);